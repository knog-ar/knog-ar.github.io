<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <link href="style.css" rel="stylesheet" type="text/css" media="all" />
    <!-- Containers for our components -->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- Actual tracking library -->

    <script src="https://rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <!-- <script src="aframe-ar.js"></script> -->
    <!-- Allow for animation-->
    <script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div
      class="position-absolute font-2em bottom-10px right w-100 text-center on-top font-monospace"
    >
      <a target="_blank" href="https://youtube.com" class="">
        <button type="button" class="btn btn-primary btn-lg">
          View Product Details
        </button></a
      >
    </div>

    <div
      class="position-absolute font-2em top-10px right w-100 text-center on-top font-monospace"
    >
      <h1 class="text-red" id="model-status">Loading...</h1>
      <h1 id="marker-status">Marker: Not Found</h1>
    </div>

    <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
    <!-- <a-scene embedded artoolkit='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'> -->

    <a-scene
      artoolkit
      loading-screen="dotsColor: red; backgroundColor: black"
      renderer="precision: medium; colorManagement: true; logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    >
      <!-- <a-assets>
        <a-asset-item
          id="ship-obj"
          src="models/test-anime_02.obj"
        ></a-asset-item>
        <a-asset-item
          id="ship-mtl"
          src="models/test-anime_02.mtl"
        ></a-asset-item>
      </a-assets> -->
      <!-- Using the asset management system. -->
      <!-- <a-entity obj-model="obj: #ship-obj; mtl: #ship-mtl"></a-entity>
      <a-marker-camera type="pattern" url="patt.ship"></a-marker-camera> -->
      <!-- <a-marker preset="kanji" emitevents="true" smooth="true" smoothCount="50"> -->
      <!--  gltf-model="src: url(https://raw.githubusercontent.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-playground/models/CesiumMan.gltf);" -->
      <!-- <a-marker
        preset="custom"
        type="pattern"
        url="/markers/knog-bottom-border-50.patt"
        id="knog-marker"
      >
        <a-entity
          id="model"
          gltf-model="src: url(/models/2019_PWR-Trail-AR-Lite-F_01v4.gltf);"
          loop="infinite"
          scale="1 1 1"
          rotation="-90 0 0"
          position="0 0 0"
          animation="property: rotation; from: 0 0 0; to: 0 359 0; dur: 3000;repeat: indefinite; loop:true; easing:linear;"
          animation-mixer
        >
        </a-entity>
      </a-marker> -->

      <!-- <a-marker preset="kanji" id="">
        <a-entity
          id="model"
          gltf-model="src: url(/models/2019_PWR-Trail-AR-Lite-F_01v4.gltf);"
          loop="infinite"
          scale="1 1 1"
          rotation="-90 0 0"
          position="0 0 0"
          animation-mixer
        >
        </a-entity>
      </a-marker> -->
      <a-marker preset="kanji" id="hiro-marker">
        <a-entity
          id="model"
          gltf-model="src: url(models/scene.glb);"
          loop="infinite"
          scale=".1 .1 .1"
          rotation="-90 0 0"
          position="0 1 0"
          animation-mixer
        >
        </a-entity>
      </a-marker>
      <!-- <a-marker
        preset="custom"
        type="pattern"
        url="/markers/pattern-knog-standalone-73.patt"
        id="knog-marker"
      >
        <a-entity
          id="model"
          gltf-model="src: url(/models/test-anime_01.gltf);"
          loop="infinite"
          scale="1 1 1"
          rotation="-90 0 0"
          position="0 2 0"
          animation-mixer
        >
        </a-entity>
      </a-marker> -->

      <!-- <a-marker preset="hiro" id="kng-maker">
        <a-entity
          id="model"
          gltf-model="src: url(/models/test-anime_01.gltf);"
          loop="infinite"
          scale=".1 .1 .1"
          rotation="-90 0 0"
          position="0 2 0"
          animation-mixer
        >
        </a-entity>
      </a-marker> -->
      <!-- </a-marker>
              animation="property: rotation; from: 0 0 0; to: 0 359 0; dur: 3000;repeat: indefinite; loop:true; easing:linear;"


      <a-marker preset="custom" type="barcode" value="30" emitevents="true" id="hiro-marker">
        <a-entity
          gltf-model="src: url(https://raw.githubusercontent.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-playground/models/CesiumMan.gltf);"
          loop="infinite"

          animation="property: rotation; from: 0 0 0; to: 0 359 0; duration: 6000;repeat: indefinite; loop:true; easing:linear;"
          animation-mixer
        ></a-entity>
      </a-marker> -->
      <!-- <a-marker-camera preset="hiro"></a-marker-camera> -->
      <a-entity camera></a-entity>
      <!-- <a-camera position="0 0 0"></a-camera> -->
    </a-scene>
    <!-- animation="property: rotation; dur: 3000; to: 0 0 359; loop: true" -->

    <div class="modal on-top" tabindex="-1" role="dialog" id="modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Welcome to Knog AR</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>
              Please point your camera at the following marker on the product in
              front of you.
              <img
                src="markers/pattern-knog-standalone.png"
                class="img-fluid"
              />
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">
              Ok
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      var l = document.querySelector("#model");
      var $status = $("#model-status");
      l.addEventListener("model-loaded", l => {
        $status.html("Load done");
        $status.removeClass("text-red");
        $status.addClass("text-green");
      });

      var m = document.querySelector("#hiro-marker");
      m.addEventListener("markerFound", e => {
        $("#marker-status").html("Marker: Found");
      });

      m.addEventListener("markerLost", e => {
        $("#marker-status").html("Marker: Not Found");
      });
      var k = document.querySelector("#hiro-marker");
      k.addEventListener("markerFound", e => {
        console.log("found");
      });

      k.addEventListener("markerLost", e => {
        console.log("lost");
      });
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $("#modal").modal("show");
      });
    </script>
  </body>
</html>
